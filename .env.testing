# ML Evaluation Platform - Testing Environment
# This file contains testing-specific configuration
# Used for automated tests and CI/CD pipelines

# =============================================================================
# APPLICATION CONFIGURATION
# =============================================================================

ENVIRONMENT=testing
DEBUG=true
TESTING=true

# Application settings
APP_NAME="ML Evaluation Platform (Testing)"
APP_VERSION=1.0.0

# Server configuration
HOST=127.0.0.1
PORT=8000
WORKERS=1

# URLs for testing
BACKEND_URL=http://localhost:8000
FRONTEND_URL=http://localhost:3000
API_VERSION=v1

# Request settings
REQUEST_TIMEOUT=60
MAX_REQUEST_SIZE=52428800  # 50MB for testing

# =============================================================================
# SECURITY CONFIGURATION
# =============================================================================

# Test secret key - never use in production
SECRET_KEY=test-secret-key-for-testing-only-do-not-use-in-production

# JWT settings for testing
JWT_SECRET=test-jwt-secret
JWT_ALGORITHM=HS256
JWT_EXPIRATION_SECONDS=3600

# API security - relaxed for testing
API_KEY_HEADER=X-API-Key
ADMIN_API_KEYS=test-admin-key-1,test-admin-key-2

# CORS settings - wide open for testing
CORS_ORIGINS=*
CORS_METHODS=*
CORS_HEADERS=*

# Rate limiting disabled for testing
RATE_LIMIT_ENABLED=false
RATE_LIMIT_REQUESTS=1000
RATE_LIMIT_WINDOW=3600

# Encryption for testing
ENCRYPTION_KEY=test-encryption-key-32-characters

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# In-memory SQLite for testing
DATABASE_URL=sqlite:///./test_ml_eval_platform.db

# Minimal database settings for testing
DB_POOL_SIZE=1
DB_MAX_OVERFLOW=0
DB_POOL_TIMEOUT=10
DB_POOL_RECYCLE=3600
DB_RETRY_ATTEMPTS=1
DB_RETRY_DELAY=0

# =============================================================================
# REDIS CONFIGURATION
# =============================================================================

# Test Redis or fakeredis
REDIS_URL=redis://localhost:6379/15
REDIS_PASSWORD=
REDIS_DB=15
REDIS_TIMEOUT=5
REDIS_MAX_CONNECTIONS=10

# =============================================================================
# CELERY CONFIGURATION
# =============================================================================

# Celery in eager mode for testing
CELERY_BROKER_URL=redis://localhost:6379/15
CELERY_RESULT_BACKEND=redis://localhost:6379/15

# Task settings for testing
CELERY_TASK_SERIALIZER=json
CELERY_RESULT_SERIALIZER=json
CELERY_ACCEPT_CONTENT=json
CELERY_TIMEZONE=UTC

# Worker settings for testing
CELERY_WORKER_CONCURRENCY=1
CELERY_WORKER_MAX_TASKS=100
CELERY_WORKER_PREFETCH=1

# Monitoring disabled in testing
FLOWER_PORT=5555
FLOWER_AUTH=

# =============================================================================
# STORAGE CONFIGURATION
# =============================================================================

# Local temporary storage for testing
USE_GCS=false
GCS_BUCKET_NAME=
GCS_PROJECT_ID=
GCS_CREDENTIALS_PATH=

# Test storage paths
MODEL_STORAGE_PATH=/tmp/test_models
IMAGE_STORAGE_PATH=/tmp/test_images
DATASET_STORAGE_PATH=/tmp/test_datasets
TEMP_STORAGE_PATH=/tmp/test_temp

# Small upload limits for testing
UPLOAD_MAX_SIZE=10485760  # 10MB
UPLOAD_ALLOWED_EXTENSIONS=.jpg,.jpeg,.png,.bmp

# Aggressive cleanup for testing
TEMP_FILE_TTL=60  # 1 minute
STORAGE_CLEANUP_ENABLED=true

# =============================================================================
# MACHINE LEARNING CONFIGURATION
# =============================================================================

# No GPU for testing (use CPU)
CUDA_VISIBLE_DEVICES=""
TORCH_HOME=/tmp/test_torch
USE_GPU=false
GPU_MEMORY_FRACTION=0.5

# Fast model settings for testing
DEFAULT_MODEL_TYPE=yolo11n
MODEL_CACHE_SIZE=1
MODEL_TIMEOUT_SECONDS=30

# Minimal training settings
DEFAULT_EPOCHS=1
DEFAULT_BATCH_SIZE=1
DEFAULT_LEARNING_RATE=0.01
MAX_TRAINING_JOBS=1

# Fast inference settings
INFERENCE_BATCH_SIZE=1
MAX_INFERENCE_JOBS=1
INFERENCE_TIMEOUT_SECONDS=30

# Basic evaluation settings
EVALUATION_METRICS=mAP,precision,recall
CONFIDENCE_THRESHOLD=0.5
IOU_THRESHOLD=0.5

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Verbose logging for testing
LOG_LEVEL=DEBUG
STRUCTURED_LOGGING=false
LOG_FORMAT=%(asctime)s - %(name)s - %(levelname)s - %(message)s

# No file logging in testing
LOG_FILE_ENABLED=false
LOG_FILE_PATH=
LOG_FILE_MAX_SIZE=1048576
LOG_FILE_BACKUP_COUNT=1

# No external logging in testing
SENTRY_DSN=
DATADOG_API_KEY=

# =============================================================================
# GOOGLE CLOUD PLATFORM CONFIGURATION
# =============================================================================

# No GCP in testing
GCP_PROJECT_ID=
GCP_REGION=us-central1
GCP_ZONE=us-central1-a

# No authentication needed
GOOGLE_APPLICATION_CREDENTIALS=
GCP_SERVICE_ACCOUNT_EMAIL=

# No Cloud Run in testing
CLOUD_RUN_SERVICE_NAME=
CLOUD_RUN_MEMORY=1Gi
CLOUD_RUN_CPU=1
CLOUD_RUN_MAX_INSTANCES=1
CLOUD_RUN_MIN_INSTANCES=0

# No Secret Manager in testing
USE_SECRET_MANAGER=false
SECRET_MANAGER_PROJECT=

# No Cloud Storage in testing
GCP_STORAGE_BUCKET=

# No AI Platform in testing
AI_PLATFORM_REGION=us-central1

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable all features for comprehensive testing
ENABLE_TRAINING=true
ENABLE_INFERENCE=true
ENABLE_EVALUATION=true
ENABLE_DEPLOYMENT=true
ENABLE_MONITORING=true

# =============================================================================
# FRONTEND CONFIGURATION (Next.js)
# =============================================================================

# Local URLs for testing
NEXT_PUBLIC_API_URL=http://localhost:8000
NEXT_PUBLIC_WS_URL=ws://localhost:8000
NEXT_PUBLIC_APP_NAME="ML Evaluation Platform (Testing)"
NEXT_PUBLIC_APP_VERSION=1.0.0

# =============================================================================
# DEVELOPMENT TOOLS
# =============================================================================

# All docs enabled for testing
RELOAD_ON_CHANGE=true
ENABLE_DOCS=true
ENABLE_REDOC=true
ENABLE_OPENAPI=true

# =============================================================================
# MONITORING AND OBSERVABILITY
# =============================================================================

# Fast health checks for testing
HEALTH_CHECK_INTERVAL=5
HEALTH_CHECK_TIMEOUT=2

# Minimal metrics for testing
ENABLE_METRICS=false
METRICS_PORT=9090
PROMETHEUS_ENABLED=false

# =============================================================================
# BACKUP AND MAINTENANCE
# =============================================================================

# No backup in testing
BACKUP_ENABLED=false
BACKUP_SCHEDULE="0 2 * * *"
BACKUP_RETENTION_DAYS=1

# Maintenance disabled
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE="Testing system maintenance"

# =============================================================================
# TESTING SPECIFIC SETTINGS
# =============================================================================

# Test database configuration
TEST_DATABASE_URL=sqlite:///./test_ml_eval_platform.db
TEST_REDIS_URL=redis://localhost:6379/15

# Mock external services
MOCK_GCP_SERVICES=true
MOCK_EXTERNAL_APIS=true

# Test data settings
TEST_DATA_PATH=/tmp/test_data
GENERATE_TEST_DATA=true
CLEANUP_TEST_DATA=true

# Performance testing
LOAD_TEST_ENABLED=false
LOAD_TEST_USERS=10
LOAD_TEST_DURATION=60

# Integration testing
INTEGRATION_TEST_TIMEOUT=300
SKIP_SLOW_TESTS=false

# Coverage settings
COVERAGE_ENABLED=true
COVERAGE_THRESHOLD=80